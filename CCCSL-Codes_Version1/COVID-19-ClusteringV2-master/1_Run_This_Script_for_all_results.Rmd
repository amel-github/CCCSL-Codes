---
title: "1_Run_This_Script_for_all_results"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


## Country-cluster analysis of the control strategies 
Project: CCCSL: Complexity Science Hub Covid-19 Control Strategies List (2020)
Script purpose: This scripts call all scripts from the project
Date:12.04.2020.
Authors: Elma Hot Dervic, Nils Haug, Am√©lie Desvars-Larrive


### Install and load packages
```{r}
my_packages <- c("dplyr", "factoextra" , "ggplot2" , "plotly" , 
                 "RColorBrewer" , "reshape2"   ,"reticulate" , "stringr" , 
                 "svglite" , "tidyverse"  , "vegan" )  
not_installed <- my_packages[!(my_packages %in% installed.packages()[ , "Package"])]    # Extract not installed packages
if(length(not_installed)) install.packages(not_installed)                               # Install not installed packages
```


Run scripts on static data for the same results as in the paper (do not run script - make_binary_measure_tables.R )

## Make_binary_measure_tables
This script creates binary representations of the CCCSL data set on category level (L2)
```{r, echo=FALSE, message=FALSE, results='hide'}
source("make_binary_measure_tables.R")
```



## Get_JohnsHopkins_data
Download the data from [COVID-19 Data Repository by the Center for Systems Science and Engineering (CSSE) at Johns Hopkins University](https://github.com/CSSEGISandData/COVID-19)

```{r, echo=FALSE, message=FALSE}
source("Get_JohnsHopkins_data.R")
```

## Get_measures_data
Read data from the binary file take names of all countries, all L1 measures, all L2 measures.

```{r, echo=FALSE, message=FALSE}
source("Get_measures_data.R")
```

## Plot_heatmaps
We propose to visualise the time series of the date of implementation of the measures recorded in the CCCSL at level 2 (categories) in the 52 countries using a heat map. To highlight country-based differences in the timeline of implementation thorough the epidemic, we used the epidemic age instead of calendar time and considered t0 as the day when the number of confirmed cases reaches 10.
To plot and save the Measures_Countries_time_of_activation\_zeroday10cases.png and Measures_Countries_time_of_activation_zeroday10cases.pdf

``````{r, echo=FALSE, message=FALSE, fig.width=15, fig.height=15, results='hide'}

source("Plot_heatmap_activation_of_measures_zeroday_10cases.R")

```

t0 could be set to:
* the day when the number of confirmed cases reaches 100 cases

``````{r, echo=FALSE, message=FALSE, fig.width=15, fig.height=15, results='hide'}

source("Plot_heatmap_activation_of_measures_zeroday_10cases.R")

```

* the day when the number of confirmed cases reaches 200 cases
``````{r, echo=FALSE, message=FALSE, fig.width=15, fig.height=25, results='hide'}

source("Plot_heatmap_activation_of_measures_zeroday_200cases.R")

```
* the day with the first registered death 
``````{r, echo=FALSE, message=FALSE, fig.width=15, fig.height=25, results='hide'}

source("Plot_heatmap_activation_of_measures_zeroday_1stdeath.R")

``` 
 
 ## Clustering_kmeans
 
  In order to partition the countries based on the aggressiveness of the control strategy (number of measures) and responsiveness (timeline), we propose a [k-means clustering method](https://en.wikipedia.org/wiki/K-means_clustering).


```{r  message=FALSE, error=FALSE}

source("Clustering_kmeans.R")
p


```

